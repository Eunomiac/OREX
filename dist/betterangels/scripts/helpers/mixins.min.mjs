import{gsap as t,Dragger as s,InertiaPlugin as e,MotionPathPlugin as i,U as r,XElem as n,XCircle as h,XItem as o,XDie as a,XSnap as p}from"./bundler.mjs";class u{constructor(t){this.t=t}i(...t){return t.reduce(((t,s=(t=>t))=>s(t)),this.t)}}export const MIX=(t=class{})=>new u(t);export const HasMotionPath=s=>class extends s{get path(){return this.h}set path(s){if(this.o(s)&&(t.set(s,{p:-50,u:-50,transformOrigin:"50% 50%"}),$(s).attr("id",`${this.id}-motion-path`),[s]=i.g(s)),!(s instanceof SVGPathElement))throw new Error("Failed to create MotionPath: Path element must be a valid SVG element.");this.h={id:`${this.id}-motion-path`,l:s,raw:i.P(s)},i.m(this.path.raw)}constructor(s,{S:e={},...i}={}){super(s,i);const[n]=this.D.find(".motion-path");t.set(n,r._({...this.constructor.M.T,...e},(t=>null!==t))),this.path=n}o(t){return t instanceof SVGElement||$(`<svg>${t.outerHTML}</svg>`).find("*")[0]instanceof SVGElement}C(t){const{x:s,y:e,angle:r}=i.$(this.path.raw,t,!0);return{x:s,y:e,angle:r,I:t}}};export const HasSnapPath=s=>class extends(HasMotionPath(s)){get path(){const s=this;return{...super.path,get points(){return[...Array(s.v)].map(((e,i)=>{const r=s.C(t.V.O(0,s.v,0,1,i));return s.G(n.N,r)}))}}}set path(t){super.path=t,this.constructor.U=this}static get U(){return this.A=this.A??new Map}static set U(t){t.path.points.forEach((({x:s,y:e})=>{s=r.H(s),e=r.H(e),this.U.set({x:s,y:e},t)}))}static R(t){this.U.forEach(((s,e,i)=>{t.id===s.id&&i.delete(e)})),super.R(t)}get v(){return this.W=this.W??10}set v(t){this.W=t}};export const IsDraggable=t=>class extends t{get j(){return this.k}get F(){return this.j?.F}get X(){return this.q&&!this.F}get B(){return super.B||this.X||this.F}set B(t){super.B=t}get parent(){return super.parent}set parent(t){super.parent=t,this.j?.update()}constructor(t,s={}){super(t,s),this.J()}J(){const t=this;[this.k]=s.create(this.l,{type:"x,y",K:!0,L:this,Y:2,Z:100,tt(){return this.st()},et(t){return this.it(t)},rt:{points:s=>t.nt(s)},ht(){return this.ot()},ut(){return this.gt()},ct(){return this.lt()}})}st(){this.q=!0}it(){}nt(){}ot(){this.q=!1}gt(){}lt(){}};export const SnapsToCircle=s=>class extends(IsDraggable(s)){get rt(){if(this.Pt)return null;const t=this;return{get Pt(){return t.dt},get x(){return t.xt?.x},get y(){return t.xt?.y},get St(){return{x:this.x,y:this.y}}}}get yt(){return this.wt=this.Pt??this.rt.Pt??h.Dt(this)}set yt(t){this.wt=t}get I(){return this._t=!!this.Pt&&(this._t??0)}set I(t){this._t=!!this.Pt&&t}get ft(){return this.Tt=this.Tt??this.options.ft??1}set ft(t){this.Tt=t}get Mt(){return this.Ct=this.Ct??.5}set Mt(t){this.Ct=t}get Et(){return this.$t=!!this.Pt&&(this.$t??0)}set Et(t){this.$t=!!this.Pt&&t}async It(s){if(!this.Pt)return Promise.reject();if(s===this.I||s===this.Et)return Promise.resolve();for(this.Et=s;this.Et<this.I;)this.Et++;let e=this.Et-this.I;e>.5&&e--,e=`${e>=0?"+":"-"}=${Math.abs(e)}`;const i=this,r=this.I,n=this.Et;return new Promise(((s,e)=>{t.to(this.l,{bt:{path:this.Pt.path.l,vt:[.5,.5],start:this.I,end:this.Et,Ot:!0},duration:this.Mt,Vt:"power4.out",Gt(){i.B=!0},Nt(){i.Pt?i.I=this.ratio*(n-r)+r:(i.B=!1,this.Ut(),e())},At(){i.I=i.Et,i.B=!1,delete i.$t,s()},Ht:e})}))}catch(){this.Pt=this.rt.Pt,delete this.Rt,delete this.xt}st(...t){super.st(...t),delete this.Rt,delete this.xt,this.Pt?.Wt(this),this.parent=h.N}it(t,...s){super.it(t,...s),this.jt()}nt(t){super.nt(t);const{x:s,y:e,Pt:i}=h.kt(t);return this.Rt=i,this.xt={x:s,y:e},{x:s,y:e}}ot(){super.ot(),this.Rt.Ft(this)}jt(){const{x:t,y:s,Pt:e}=h.Xt(this);this.dt=e,this.xt={x:t,y:s}}};