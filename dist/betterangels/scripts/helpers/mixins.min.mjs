import{gsap as t,Dragger as s,InertiaPlugin as e,MotionPathPlugin as r,U as i,XElem as n,XCircle as h,XItem as o,XDie as a,XSnap as p}from"./bundler.mjs";class u{constructor(t){this.t=t}i(...t){return t.reduce(((t,s=(t=>t))=>s(t)),this.t)}}export const MIX=(t=class{})=>new u(t);export const HasMotionPath=s=>class extends s{get path(){return this.h}set path(s){t.set(s,{o:-50,p:-50,transformOrigin:"50% 50%"}),$(s).attr("id",`${this.id}-motion-path`),this.h={id:`${this.id}-motion-path`,u:s,raw:r.g(s),l:i.P(i.m($(s).attr("d"),/(\d+)\s*z$/giu))},console.log(`PATH RADIUS: ${this.h.l}`),r.S(this.path.raw)}constructor(s,{D:e={},...r}={}){super(s,r);const[n]=this._.find(".motion-path");t.set(n,i.T({...this.constructor.I.C,...e},(t=>null!==t))),this.path=n}M(t){const{x:s,y:e,angle:i}=r.O(this.path.raw,t,!0);return{x:s,y:e,angle:i,$:t}}A(s,{$:e,x:r,y:n}={}){return e=e??t.U.normalize(-180,180,i.H(this.N(s,{x:r??s.x,y:n??s.y})-90,[-180,180])),this.M(e)}};export const HasSnapPath=s=>class extends(HasMotionPath(s)){get path(){const s=this;return{...super.path,get points(){return[...Array(s.k)].map(((e,r)=>{const i=s.M(t.U.v(0,s.k,0,1,r));return s.R(n.W,i)}))}}}set path(t){super.path=t,this.constructor.j=this}static get j(){return this.X=this.X??new Map}static set j(t){t.path.points.forEach((({x:s,y:e})=>{s=i.P(s),e=i.P(e),this.j.set({x:s,y:e},t)}))}static q(t){this.j.forEach(((s,e,r)=>{t.id===s.id&&r.delete(e)})),super.q(t)}get k(){return this.B=this.B??10}set k(t){this.B=t}};export const IsDraggable=t=>class extends t{get F(){return this.G}get J(){return this.F?.J}get K(){return this.L&&!this.J}get V(){return super.V||this.K||this.J}set V(t){super.V=t}get parent(){return super.parent}set parent(t){super.parent=t,this.F?.update()}constructor(t,s={}){super(t,s),this.Y()}Y(){const t=this;[this.G]=s.create(this.u,{type:"x,y",Z:!0,tt:this,st:2,et:100,rt(){return this.it()},nt(t){return this.ht(t)},ot:{points:s=>t.ut(s)},gt(){return this.ct()},lt(){return this.Pt()},dt(){return this.xt()}})}it(){this.L=!0}ht(){}ut(){}ct(){this.L=!1}Pt(){}xt(){}};export const SnapsToCircle=s=>class extends(IsDraggable(s)){get ot(){if(this.yt)return null;const t=this;return{get yt(){return t.St},get x(){return t.Dt?.x},get y(){return t.Dt?.y},get wt(){return{x:this.x,y:this.y}}}}get $(){return this.yt.A(this).$}get _t(){return this.Tt=this.Tt??this.options._t??1}set _t(t){this.Tt=t}get Ct(){return this.It=this.It??0}set Ct(t){this.It=t}async bt(s,e=.5){if(!this.yt)return Promise.reject();this.Ct=s;const{$:r}=this;return new Promise(((s,r)=>{t.to(this.u,{ft:{path:this.yt.path.u,Mt:[.5,.5],Ot:!1,start:this.$,end:this.Ct},duration:e,tt:this,$t:"power4.out",At(){this.V=!0},Ut(){},Ht(){this.V=!1,s()},Nt:r})}))}it(...t){delete this.Dt,delete this.St,super.it(...t),this.yt?.removeItem(this),this.yt?.kt(),this.parent=h.W,this.Et()}ht(t,...s){super.ht(t,...s)}ut(t){if(!this.Dt){super.ut(t);const{x:s,y:e,yt:r}=h.vt(t);this.Dt={x:s,y:e},this.St=r}return this.Dt}ct(){super.ct(),this.St.Rt(this)}xt(){super.xt(),this.yt=this.St,this.yt.Wt(!0),t.jt(this.u,this.Dt,{x:this.St.x,y:this.St.y,opacity:.4,$t:"expo.out",duration:1,tt:this,Ht(){t.to(this.u,{opacity:1,duration:.5}),this.St.Xt(this).zt(),this.St.kt(),this.St.Wt(!0)}})}};