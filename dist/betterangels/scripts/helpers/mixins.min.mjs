/* ▌██░░ betterangels v0.0.1-prealpha (2021) ║ MIT License ║ https://github.com/Eunomiac/betterangels ░░██▐ */import gsap,{Draggable as Dragger,InertiaPlugin,MotionPathPlugin}from"/scripts/greensock/esm/all.js";import{U,XCircle,XItem,XDie,XSnap}from"./bundler.mjs";class MixinBuilder{constructor(r){this.superclass=r}with(...r){return r.reduce(((r,e=(r=>r))=>e(r)),this.superclass)}}export const MIX=r=>new MixinBuilder(r);export const IsDraggable=r=>class extends r{get dragger(){return this._dragger}get isThrowing(){return this.dragger?.isThrowing}get isDragging(){return this._isDragging&&!this.isThrowing}get isMoving(){return super.isMoving||this.isDragging||this.isThrowing}get parent(){return super.parent}set parent(r){super.parent=r,this.dragger?.update(!1,this.isDragging)}_create(...r){super._create(...r),this._createDragger()}_createDragger(){[this._dragger]=Dragger.create(this.elem,{type:"x,y",inertia:!0,callbackScope:this,minDuration:2,throwResistance:100,onDragStart(){this._isDragging=!0,this._updateClosestCircle(),this.circle?.pluckItem(this),this.parent=XCircle.CONTAINER},onDrag(){this._updateClosestCircle()},snap({x:r,y:e}){const{x:t,y:i,circle:s}=XCircle.Snap({x:r,y:e});return this._snapCircle=s,{x:t,y:i}},onDragEnd(){this._isDragging=!1,this._snapCircle.catchItem(this,{x:this.dragger.endX,y:this.dragger.endY})},onThrowUpdate(){this._updateClosestCircle()},onThrowComplete(){delete this._snapCircle}})}};