import{gsap as t,Dragger as e,InertiaPlugin as s,MotionPathPlugin as i,U as r,XElem as n,XCircle as h,MIX as a,IsDraggable as c,SnapsToCircle as g}from"../helpers/bundler.mjs";class o extends n{static get t(){return this.i=this.i??{}}static get h(){return Object.values(this.t)}static get g(){return{}}static get o(){return["x-item"]}static get u(){return"xItem"}static l(t){if(t.p.name)t.$=t.p.name;else{const e=`${t.S}_${t.m}`,s=new RegExp(`^${e}_`),i=parseInt(Object.keys(this.t).filter((t=>s.test(t))).pop()?.match(/_(\d+)$/)?.pop()??0)+1;t.$=`${e}_${i}`,t.T=`${t.constructor.u}-${t.name}`}}static P(t){return this.t[t.name]=t,this.I=!0,t}static A(t){delete this.t[t.name],0===this.h.length&&(this.I=!1)}constructor(t={}){super(),this.p=t,this.type=t.type,this.S=t.L?.id??t.L??t.R?.L?.id??r.F(),this.constructor.l(this),this.Y(t.R),this.constructor.P(this)}get L(){return game.users.get(this.S)}get name(){return this.$}get slot(){const{slot:t}=this.R?.v(this)??{};return t}get _(){const{angle:t}=this.R?.v(this)??{};return t}get j(){return`watchItem-${this.name}`}get type(){return this.m}set type(t){const e=this.constructor.g[t]??t??this.constructor.C;if(!Object.values(this.constructor.g).includes(e))throw new Error(`Invalid ${this.constructor.name} Type: ${t}`);this.m=e,this.X=[]}get R(){return this.parent instanceof h?this.parent:void 0}set R(t){if(!(t instanceof h))throw new Error(`[${this.constructor.name}.parent] '${t}' is not an XCircle`);this.parent=t}get D(){return this.O}set D(t){this.O=Boolean(t)}Y(t){[this.U]=$(`<div id="${this.id}" class="${this.M.join(" ")}" />`),this[t?"R":"parent"]=t??h.N,this.set({B:-50,G:-50,rotation:0,...this.k?.x?this.k:{}})}q(){this.set({rotation:-1*(this.parent?.rotation??0)})}}class u extends(a(o).H(c,g)){static get g(){return{J:"basic"}}static get C(){return this.g.J}static get o(){return[...super.o,"x-die"]}static get u(){return"xDie"}}class l extends(a(o).H(g)){static get g(){return{K:"die"}}static get C(){return this.g.K}static get o(){return[...super.o,"x-snap"]}static get u(){return"xSnap"}constructor(t,e={}){e.V=e.V??2,e.name=`S:${t.name}`,super(e),this.W=t,this.k=e.Z?{x:e.Z.x,y:e.Z.y}:{x:e.x,y:e.y}}get tt(){return this.W}set tt(t){this.W=t}}export{o as XItem,u as XDie,l as XSnap};