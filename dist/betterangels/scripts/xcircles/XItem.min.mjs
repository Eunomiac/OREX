import{gsap as t,Dragger as e,InertiaPlugin as s,MotionPathPlugin as i,U as r,XCircle as n,MIX as h,BindToXElem as a,IsDraggable as c,SnapsToCircle as g}from"../helpers/bundler.mjs";class o extends(h().t(a)){static get i(){return this.h=this.h??{}}static get g(){return Object.values(this.i)}static get o(){return{}}static get u(){return["x-item"]}static get l(){return"xItem"}static p(t){if(t.$.name)t.S=t.$.name;else{const e=`${t.m}_${t.T}`,s=new RegExp(`^${e}_`),i=parseInt(Object.keys(this.i).filter((t=>s.test(t))).pop()?.match(/_(\d+)$/)?.pop()??0)+1;t.S=`${e}_${i}`,t.P=`${t.constructor.l}-${t.name}`}}static I(t){return this.i[t.name]=t,this.A=!0,t}static L(t){delete this.i[t.name],0===this.g.length&&(this.A=!1)}constructor(t={}){super(),this.$=t,this.type=t.type,this.m=t.R?.id??t.R??t.F?.R?.id??r.Y(),this.constructor.p(this),this.v(t.F),this.constructor.I(this)}get R(){return game.users.get(this.m)}get name(){return this.S}get slot(){const{slot:t}=this.F?._(this)??{};return t}get j(){const{angle:t}=this.F?._(this)??{};return t}get C(){return`watchItem-${this.name}`}get type(){return this.T}set type(t){const e=this.constructor.o[t]??t??this.constructor.X;if(!Object.values(this.constructor.o).includes(e))throw new Error(`Invalid ${this.constructor.name} Type: ${t}`);this.T=e,this.D=[]}get F(){return this.parent instanceof n?this.parent:void 0}set F(t){if(!(t instanceof n))throw new Error(`[${this.constructor.name}.parent] '${t}' is not an XCircle`);this.parent=t}get O(){return this.U}set O(t){this.U=Boolean(t)}v(t){[this.M]=$(`<div id="${this.id}" class="${this.N.join(" ")}" />`),this[t?"F":"parent"]=t??n.B,this.set({G:-50,k:-50,rotation:0,...this.q?.x?this.q:{}})}H(){this.set({rotation:-1*(this.parent?.rotation??0)})}}class u extends(h(o).t(c,g)){static get o(){return{J:"basic"}}static get X(){return this.o.J}static get u(){return[...super.u,"x-die"]}static get l(){return"xDie"}}class l extends(h(o).t(g)){static get o(){return{K:"die"}}static get X(){return this.o.K}static get u(){return[...super.u,"x-snap"]}static get l(){return"xSnap"}constructor(t,e={}){e.V=e.V??2,e.name=`S:${t.name}`,super(e),this.W=t,this.q=e.Z?{x:e.Z.x,y:e.Z.y}:{x:e.x,y:e.y}}get tt(){return this.W}set tt(t){this.W=t}}export{o as XItem,u as XDie,l as XSnap};