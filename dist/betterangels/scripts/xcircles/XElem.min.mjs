import{gsap as t,MotionPathPlugin as e,U as i}from"../helpers/bundler.mjs";export default class s{static get t(){return{i:"basic"}}static get h(){return{o:"xElem",g:["x-elem"],u:this.t.i,l:{position:"absolute",p:-50,m:-50,transformOrigin:"50% 50%"},$:{T:"<div></div>",id:"x-container",parent:$(".vtt.game")[0],A:["x-container"],properties:{position:"relative",p:0,m:0,transformOrigin:"0% 0%"}}}}static get $(){return s.O=s.O??new s($(s.h.$.T).P("id",s.h.$.id),{properties:{...s.h.l,...s.h.$.properties},parent:s.h.$.parent,A:s.h.$.A})}static get R(){return this.j=this.j??{}}static get L(){return Object.values(this.R)}static _(t){return this.R[t.name]=t}static v(t){delete this.R[t.name]}static N({S:t,type:e}={}){const s=`${t}_${e}`,r=new RegExp(`${s}_`);return`${s}_${i.I(Object.keys(this.R).filter((t=>r.test(t))).pop()?.match(/_(\d+)$/)?.pop())+1}`}get(e){return t.C(this.D,e)}set(e={}){t.set(this.D,e)}get options(){return this.M=this.M??{}}constructor(t,{properties:e={},S:r=i.H(),type:h=this.constructor.h.u,parent:n,A:o=[],...a}={}){if(!("Y"in t))throw new Error(`${this.constructor.name} must be instantiated with a jQuery object.`);{let g;if((n=n??t.q()[0]??this.constructor.$)instanceof s?(this.F=n,g=n.D):"Y"in n?[g]=n:n instanceof HTMLElement&&(g=n),!t.q[0]){if(!g)throw new Error("XElems must be existing DOM elements, or provide a parent to append to.");t.G(g)}this.U=t,[this.X]=this.k,this.J="string"===i.getType(r)?r:r.id,this.type=h;const u=a.name??this.constructor.N({S:this.J,type:h});if(u in this.constructor.R)throw new Error(`'${a.name}' has already been registered as an ${this.constructor.name}.`);this.B=u,this.K=`${this.constructor.h.o}-${u}`,this.M=a,this.k.P("id",this.K),this.A=[...a.V?[]:this.constructor.h.g,...o],this.constructor._(this),this.set(i.W({...this.constructor.h.l,...e},(t=>null!==t)))}}get k(){return this.U}get D(){return this.X}get name(){return this.B}get id(){return this.K}get Z(){return this.tt=this.tt??`#${this.id}`}get tag(){return this.D.tagName}get S(){return game.users.get(this.J)}get type(){return this.et}set type(t){if(!Object.values(this.constructor.t).includes(t))throw new Error(`Invalid ${this.constructor.name} Type: ${t}`);this.et=t}it(){this.k.remove()}get x(){return this.get("x")}set x(t){this.set({x:t})}get y(){return this.get("y")}set y(t){this.set({y:t})}get st(){return{x:this.x,y:this.y}}set st({x:t,y:e}){this.set({x:t,y:e})}get left(){return this.x-.5*this.width}set left(t){this.x=t+.5*this.width}get top(){return this.y-.5*this.height}set top(t){this.y=t+.5*this.height}get right(){return this.x+.5*this.width}set right(t){this.x=t-.5*this.width}get bottom(){return this.y+.5*this.height}set bottom(t){this.y=t-.5*this.height}get height(){return this.get("height")}set height(t){this.set({height:t})}get width(){return this.get("width")}set width(t){this.set({width:t})}get rt(){return(this.height+this.width)/4}set rt(t){const e=t/this.rt;this.set({height:this.height*e,width:this.width*e})}get rotation(){return t.C(this.D,"rotation")}set rotation(e){if(/^[+-]=/.test(`${e}`)&&(e=this.rotation+i.ht(`${e}`.replace(/=/g,""))),!["int","float"].includes(i.getType(e)))throw new Error(`Cannot set rotation to a non-number value: ${JSON.stringify(e)}`);t.set(this.D,{rotation:e})}nt({x:t,y:e}){return i.ot(this,{x:t,y:e})}gt({x:t,y:e}){return i.ut(this.rotation+180,this.nt({x:t,y:e}))}lt({x:t,y:e}){return i.ct(this,{x:t,y:e})}xt(t){return e.yt(this.parent.D,t.D,this.st)}dt(t,i){return e.yt(this.D,t.D,i)}get parent(){return this.F}set parent(t){if(!(t instanceof s))throw new Error(`[${this.constructor.name}.parent] No element found for '${t}'`);{const{x:e,y:i}=this.xt(t);this.k.G(t.D),this.set({x:e,y:i})}}get A(){return this.D.classList}set A(t){"string"===i.getType(t)&&(t=t.trim().split(/\s+/));const e=[...this.constructor.h.g,...t];Array.from(this.A).filter((t=>!e.includes(t))).forEach(this.A.remove),t.forEach((t=>this.A.add(t)))}get text(){return this.get("innerText")}set text(t){this.set({innerText:t})}get T(){return this.get("innerHTML")}set T(t){this.set({innerHTML:t})}}