import{gsap as t,MotionPathPlugin as e,U as i}from"../helpers/bundler.mjs";export default class s{static get t(){return{i:"basic"}}static get h(){return{o:"xElem",g:["x-elem"],u:this.t.i,l:{position:"absolute",p:-50,m:-50,transformOrigin:"50% 50%"},T:{$:"<div></div>",id:"x-container",parent:$(".vtt.game")[0],A:["x-container"],properties:{position:"relative",p:0,m:0,transformOrigin:"0% 0%"}}}}static get T(){return s.O||(s.O=new s($(s.h.T.$),{properties:{...s.h.l,...s.h.T.properties},parent:s.h.T.parent,A:s.h.T.A}),s.O.R.P("id",s.h.T.id),s.O.L=s.h.T.id,s.O.j=s.h.T.id),s.O}static get v(){return this.N=this.N??{}}static get S(){return Object.values(this.v)}static I(t){return this.v[t.name]=t}static _(t){delete this.v[t.name]}static C(t){if(t.options?.name){if(t.options.name in this.v)throw new Error(`'${t.options.name}' has already been registered as an ${t.constructor.name}.`);return t.options.name}const e=i.D(i.M(this.S.filter((e=>e.constructor.name===t.constructor.name&&e.H===t.H&&e.Y===t.Y)))?.name?.match(/\d+$/)?.pop())+1;return`${t.constructor.h.o}-${t.H}_${t.Y}_${e}`}get(e){return t.q(this.F,e)}set(e={}){t.set(this.F,e)}get options(){return this.G=this.G??{}}constructor(t,{properties:e={},U:r=i.X(),type:h=this.constructor.h.u,parent:n,A:o=[],...a}={}){if(!("k"in t))throw new Error(`${this.constructor.name} must be instantiated with a jQuery object.`);{let g;if((n=n??t.J()[0]??this.constructor.T)instanceof s?(this.B=n,g=n.F):"k"in n?[g]=n:n instanceof HTMLElement&&(g=n),!t.J[0]){if(!g)throw new Error("XElems must be existing DOM elements, or provide a parent to append to.");t.K(g)}this.V=t,[this.W]=this.R,this.H="string"===i.getType(r)?r:r.id,this.type=h,this.G=a,this.L=this.constructor.C(this),this.j=this.L,this.R.P("id",this.j),this.A=[...a.Z?[]:this.constructor.h.g,...o],this.constructor.I(this),this.set(i.tt({...this.constructor.h.l,...e},(t=>null!==t)))}}get R(){return this.V}get F(){return this.W}get name(){return this.L}get id(){return this.j}get et(){return this.it=this.it??`#${this.id}`}get tag(){return this.F.tagName}get U(){return game.users.get(this.H)}get type(){return this.Y}set type(t){if(!Object.values(this.constructor.t).includes(t))throw new Error(`Invalid ${this.constructor.name} Type: ${t}`);this.Y=t}st(){this.R.remove()}get x(){return this.get("x")}set x(t){this.set({x:t})}get y(){return this.get("y")}set y(t){this.set({y:t})}get rt(){return{x:this.x,y:this.y}}set rt({x:t,y:e}){this.set({x:t,y:e})}get left(){return this.x-.5*this.width}set left(t){this.x=t+.5*this.width}get top(){return this.y-.5*this.height}set top(t){this.y=t+.5*this.height}get right(){return this.x+.5*this.width}set right(t){this.x=t-.5*this.width}get bottom(){return this.y+.5*this.height}set bottom(t){this.y=t-.5*this.height}get height(){return this.get("height")}set height(t){this.set({height:t})}get width(){return this.get("width")}set width(t){this.set({width:t})}get ht(){return(this.height+this.width)/4}set ht(t){const e=t/this.ht;this.set({height:this.height*e,width:this.width*e})}get rotation(){return t.q(this.F,"rotation")}set rotation(e){if(/^[+-]=/.test(`${e}`)&&(e=this.rotation+i.nt(`${e}`.replace(/=/g,""))),!["int","float"].includes(i.getType(e)))throw new Error(`Cannot set rotation to a non-number value: ${JSON.stringify(e)}`);t.set(this.F,{rotation:e})}ot({x:t,y:e}){return i.gt(this,{x:t,y:e})}ut({x:t,y:e}){return i.lt(this.rotation+180,this.ot({x:t,y:e}))}ct({x:t,y:e}){return i.xt(this,{x:t,y:e})}yt(t){return e.dt(this.parent.F,t.F,this.rt)}wt(t,i){return e.dt(this.F,t.F,i)}get parent(){return this.B}set parent(t){if(!(t instanceof s))throw new Error(`[${this.constructor.name}.parent] No element found for '${t}'`);{const{x:e,y:i}=this.yt(t);this.R.K(t.F),this.set({x:e,y:i})}}get A(){return this.F.classList}set A(t){"string"===i.getType(t)&&(t=t.trim().split(/\s+/));const e=[...this.constructor.h.g,...t];Array.from(this.A).filter((t=>!e.includes(t))).forEach(this.A.remove),t.forEach((t=>this.A.add(t)))}get text(){return this.get("innerText")}set text(t){this.set({innerText:t})}get $(){return this.get("innerHTML")}set $(t){this.set({innerHTML:t})}}