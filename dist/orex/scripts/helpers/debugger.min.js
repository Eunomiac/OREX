import{C as e,U as t,XItem as o,XGroup as a,XPool as i,XDie as n,XTermType as r,XOrbitType as s,XRoll as c}from"./bundler.js";const l=(t,o,a,...i)=>{if(e.t){const e=Object.entries({...x.o,...x[t]??{},...o}).map((([e,t])=>`${e}: ${t};`)).join(" ");i.length?"NOGROUP"===i[0]?console.log(`%c${a}`,e):(console.groupCollapsed(`%c${a}`,e,...i),console.trace(),console.groupEnd()):console.groupCollapsed(`%c${a}`,e)}},x={title:{background:"linear-gradient(to right,#da1b60,#ff8a00)",color:"#100e17","font-family":"Candal","font-size":"18px",padding:"0 30px 0 10px","margin-left":"-20px"},display:{background:"#EDB620",color:"black","font-family":"AlverataInformalW01-Regular","font-size":"16px",padding:"0 10px 0 10px","font-weight":"bold"},o:{background:"#000000",color:"#EDB620","font-family":"Pragmata Pro",padding:"0 20px 0 20px"},info:{background:"transparent",color:"white","font-size":"11px","font-weight":"normal","font-family":"Fira Code",padding:"0 30px 0 30px"},error:{color:"#FF0000",background:"#950A0F","font-weight":"bold",padding:"0 800px 0 50px"},groupEnd:{}},d={log:(e,...t)=>l("base",{},e,...t.length?t:["NOGROUP"]),title:e=>l("title",{},e,"NOGROUP"),display:(e,...t)=>l("display",{},e,...t.length?t:["NOGROUP"]),info:(e,...t)=>l("info",{},e,...t.length?t:["NOGROUP"]),error:(e,...t)=>l("error",{},e,...t.length?t:["NOGROUP"]),i:e=>l("base",{},e),l:e=>l("title",{},e),g:e=>l("display",{},e),p:e=>l("info",{},e),h:e=>l("error",{},e),groupEnd:()=>console.groupEnd()};class y{static u=new Map;static m(e){this.u.has(e.label)&&this.u.get(e.label)?.k.P(),this.u.set(e.label,e)}static R(e){this.u.delete(e.label),e.k.P()}static O(){this.u.forEach((e=>e.k.P())),this.u.clear()}static get $(){return`xPing-${this.u.size+1}`}k;label;color;D;context;constructor(a,i,n=o.C,r="random"){this.color="random"===r?t.A(Object.keys(e.v)):r,this.k=new o(n,{id:y.$,T:["x-ping"],B:{set:{height:100,width:100,x:a.x,y:a.y,background:`radial-gradient(red 5%, ${this.color} 10%, transparent 60%, yellow 62%, transparent 64%)`,textAlign:"center",lineHeight:"50px",fontSize:"24px",fontFamily:"Oswald",color:"white",textShadow:"0 0 3px black, 0 0 3px black, 0 0 3px black, 0 0 3px black, 0 0 3px black, 0 0 3px black, 0 0 3px black"},from:{opacity:0,scale:.5},to:{opacity:1,scale:1,j:"elastic.out(5)",duration:.5}}}),this.label=i,this.D=a,this.context=n,this.initialize()}async initialize(){await this.k.initialize(),this.k.N.G(this.label),y.m(this),l("base",{background:this.color},`â–¶${t.S(this.label)} at {x: ${t.U(this.D.x,1)}, y: ${t.U(this.D.y,1)}}`,this)}}Object.assign(d,{X:(e,t,o,a)=>new y(e,t,o,a),F:()=>y.O()});const g=["PositionXDie","ParentXArm","StretchXArm","ResumeRotation"],p={I:async()=>{const{M:e,L:t,H:s,K:c}=await(async()=>{const e=new i(o.C,{id:"translate-box",T:["translate-box"],B:{set:{V:0,W:0},to:{x:"+=500",duration:5,j:"power3.inOut",repeat:-1,Y:!0}}}),t=new a(e,{id:"scale-box-1",T:["scale-box"],B:{set:{V:0,W:0},to:{scale:2,duration:15,j:"sine.inOut",repeat:-1,Y:!0}}}),n=new a(t,{id:"scale-box-2",T:["extra-scale-box"],B:{set:{V:0,W:0},to:{scale:3,duration:5,j:"sine.inOut",repeat:-1,Y:!0}}}),r=new a(n,{id:"rotate-box-1",T:["rotate-box"],B:{set:{V:0,W:0},to:{rotation:"+=360",duration:2,j:"none",repeat:-1}}}),s=new a(r,{id:"rotate-box-2",T:["rotate-box"],B:{set:{V:0,W:0},to:{rotation:"-=360",duration:2,j:"power4.inOut",repeat:-1}}});return await Promise.all([e,t,n,r,s].map((e=>e.initialize()))),{M:e,L:t,q:n,H:r,K:s}})(),l=new n(c,{id:"test-die",type:r.J,value:3,color:"lime",size:50}),x=[{x:.5,y:0,background:"yellow"},{x:0,y:1,background:"cyan"},{x:1,y:1,background:"magenta"}].map((({x:e,y:t,background:a},i)=>new o(l,{id:`die-marker-${i+1}`,T:["x-marker"],B:{set:{height:10,width:10,x:50*e,y:50*t,background:a}}}))),y=["yellow","cyan","magenta"].map(((e,t)=>new o(o.C,{id:`x-marker-${t+1}`,T:["x-marker"],B:{set:{height:10,width:10,x:100+20*t,y:500+40*t,background:e}}})));y.forEach(((e,t)=>{e.Z((()=>{x[t]._&&e.set(x[t].ee)}))})),[l,...x,...y].forEach((e=>e.initialize())),d.log("Test Die Objs =>",x,y,e,t,s,l)},te:(t,{id:o,x:a,y:n,size:r=200,color:s="cyan"})=>new i(t,{id:o,B:{set:{height:r,width:r,left:a-.5*r,top:n-.5*r,oe:s}},ae:e.ie}),ne:({value:e,color:t="white",re:a="black",se:i="black",size:s=50}={})=>new n(o.C,{id:"x-die",type:r.J,value:e,color:t,re:a,se:i,size:s}),ce:async()=>{const e=[{x:950,y:650,size:400,color:"rgba(255, 0, 0, 0.5)",le:{xe:[6,"cyan",[2,"lime"]],de:[5,"silver",[3,"gold"],[4,"rgba(0, 0, 255, 0.5)"]],inner:[3,"red"]}}].map((async({x:e,y:a,size:i,color:c,le:l},x)=>{const y=p.te(o.C,{id:"POOL",x:e,y:a,size:i,color:c});await y.initialize(),globalThis.CIRCLE??=[],globalThis.CIRCLE.push(y);for(const[e,[a,i,...c]]of Object.entries(l)){for(let s=0;s<a;s++){const a=new n(o.C,{id:"xDie",type:r.J,value:t.ye(0,9),color:"string"==typeof i?i:void 0});await y.ge(a,e)||d.error(`Error rendering xDie '${a.id}'`)}if(c.length){d.log("Nested Pools",c);for(const[a,i]of c){const c=p.te(o.C,{id:"subPool",x:0,y:0,size:75,color:i});await y.ge(c,e),await c.initialize();for(let e=0;e<a;e++){const e="xDie";try{await c.ge(new n(o.C,{id:e,type:r.J,value:t.ye(0,9),color:"string"==typeof i?i:void 0}),s.pe)}catch(t){d.error(`Error rendering xDie '${e}'`,t)}}}}}}));return await Promise.allSettled(e),globalThis.POOLS=e,Promise.allSettled(e)},be:async(e,t={},a=[])=>{t={x:0,y:0,height:400,width:400,he:"white",ue:"cyan",...t};const{he:i,ue:l,...x}=t;x["oe"]=l;const d=new c(o.C,{id:"ROLL",B:{set:x}});await d.initialize();let y=e.flatMap((e=>{const t=i;return[...new Array(e)].map((()=>new n(o.C,{id:"xDie",type:r.J,value:0,color:t})))}));return await Promise.allSettled(y.map((e=>e.initialize()))),a.forEach((e=>{const t=Math.floor(Math.random()*y.length);y=[...y.slice(0,t),e,...y.slice(t)]})),await d.we({[s.pe]:y}),d},me:async(e,a)=>{const i=new o(o.C,{id:"pointMarker",B:{set:{height:0,width:0,x:0,y:0}}});await i.initialize(),document.addEventListener("click",(async n=>{if(d.display("Click Event Triggered"),d.X({x:n.pageX,y:n.pageY},"EVENT"),i.set({x:n.pageX,y:n.pageY}),d.log(`Event Position: {x: ${n.pageX}, y: ${n.pageY}}`),d.log(`Focus Position: {x: ${e.global.x}, y: ${e.global.y}}`),d.log(`Distance: ${e.fe({x:n.pageX,y:n.pageY})}`),d.log(`Angle: ${e.Pe({x:n.pageX,y:n.pageY})}`),a){const[r,s]=a,c=g.shift();g.push(c);const{x:l,y:x}=r.Re.ke(i);switch(d.display(`Click pos from xArm: {x: ${t.U(l,1)}, y: ${t.U(x,1)}}`),c){case"PositionXDie":e.Oe(),o.C.$e(s),s.set({x:n.pageX,y:n.pageY,rotation:0});break;case"ParentXArm":{const{x:e,y:t}=MotionPathPlugin.convertCoordinates(s.De,r.De,{x:0,y:0});d.X({x:e,y:t},"xDie",r),r.$e(s,!0),r.set({outlineColor:"gold"});break}case"StretchXArm":{await r.Ce(),await s.set({x:0,y:0,rotation:-1*r.global.rotation});const{x:e,y:t}=MotionPathPlugin.convertCoordinates(s.De,r.De,{x:0,y:0});d.X({x:e,y:t},"xDie",r);break}case"ResumeRotation":e.Ae()}d.log("Objects",{event:n,focus:e,ve:s,ze:r})}else d.log("Objects",{event:n,focus:e})}))},Ee:async e=>{const[t]=e.ae.get(s.pe)?.Te??[];if(t?._&&t.Be){const a=t.Be;o.C.$e(t,!0),t.set({x:100,y:100,je:"magenta"}),Object.assign(globalThis,{ve:t,ze:a}),p.me(e,[a,t]),d.log("XArm Test Ready",{Ge:e,ve:t,ze:a})}}};export{d as default,p as TESTS};