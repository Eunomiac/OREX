import{gsap as t,MotionPathPlugin as i,U as s,XItem as e}from"../helpers/bundler.js";export default class h{constructor(t){this.t={},this.i=!1,this.h=t.h,this.id=this.h.id,this.o=t.o??{}}get u(){return this.h.g}get p(){return this.l(),this.h.element[0]}get m(){return $(this.p)}get R(){return this.i}async A(t=!0){if(this.i=this.R||t,this.P)return Promise.resolve(!0);if(!this.R)return Promise.resolve(!1);if(this.$=this.h.v(),await this.$,this.u){if(!await this.u.A())return console.warn("Attempt to render child of unrendered parent."),Promise.resolve(!1);this.u?.D(this.h,!1)}return this.o.set&&this.set(this.o.set),this.o.to&&this.o.from?this.j(this.o.from,this.o.to):this.o.to?this.to(this.o.to):this.o.from&&this.from(this.o.from),this.o.C?.forEach((t=>t(this.h))),this.$}get P(){return this.h.I}l(){if(!this.P)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} '${this.id}': Did you forget to await confirmRender?`)}D(t,i=!0){t.g?.L(t),this.h.T(t),this.P&&t.P&&(i&&t.set(this.X(t)),t.m.k(this.p))}get x(){return s.q(this.P?s.get(this.p,"x","px"):this.o.set?.x)}get y(){return s.q(this.P?s.get(this.p,"y","px"):this.o.set?.y)}get B(){return{x:this.x,y:this.y}}get rotation(){return s.F(this.P?s.get(this.p,"rotation"):this.o.set?.rotation,2)}get scale(){return s.F(this.P?s.get(this.p,"scale"):this.o.set?.scale,2)||1}get global(){this.l();const t=this;return{get B(){return t.u?(t.u.G.l(),i.H(t.u.p,e.J.p,t.B)):t.B},get x(){return this.B.x},get y(){return this.B.y},get rotation(){let i=t.rotation,{u:s}=t;for(;s;)s.G.l(),i+=s.rotation,s=s.g;return i},get scale(){let i=t.scale,{u:s}=t;for(;s;)s.G.l(),i*=s.scale,s=s.g;return i}}}get height(){return s.q(this.P?s.get(this.p,"height","px"):this.o.set?.height)}get width(){return s.q(this.P?s.get(this.p,"width","px"):this.o.set?.width)}get size(){return(this.height+this.width)/2}get K(){return this.height===this.width&&this.height}X(t,s){return this.l(),t.G.l(),{...i.H(e.J.p,this.p,s??t.global.B),rotation:t.global.rotation-this.global.rotation,scale:t.global.scale/this.global.scale}}set(i){return this.P?t.set(this.p,i):(this.o.set={...this.o.set??{},...i},!1)}to(i){if(this.P){const s=t.to(this.p,i);return i.id&&(this.t[i.id]=s),s}return this.o.to={...this.o.to??{},...i},!1}from(i){if(this.P){const s=t.from(this.p,i);return i.id&&(this.t[i.id]=s),s}return this.o.from={...this.o.from??{},...i},!1}j(i,s){if(this.P){const e=t.j(this.p,i,s);return s.id&&(this.t[s.id]=e),e}return this.o.to={...this.o.to??{},...s},this.o.from={...this.o.from??{},...i},!1}}