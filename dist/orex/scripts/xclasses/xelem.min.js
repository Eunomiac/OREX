import{gsap as t,MotionPathPlugin as i,U as s,XItem as h}from"../helpers/bundler.js";export default class e{constructor(t){this.t=!1,this.i=t.i,this.id=this.i.id,this.h=t.h??{}}get o(){return this.i.parent}get u(){return this.g(),this.i.element[0]}get p(){return $(this.u)}get l(){return this.t}async m(t=!0){return this.t=this.l||t,this.R?Promise.resolve(!0):this.l?this.o&&!await this.o.m(t)?(console.warn("Attempt to render child of unrendered parent."),Promise.resolve(!1)):(this.A=this.i.P(),await this.A,this.o?.$(this.i,!1),this.h.set&&this.set(this.h.set),this.h.to&&this.h.from?this.v(this.h.from,this.h.to):this.h.to?this.to(this.h.to):this.h.from&&this.from(this.h.from),this.h.D?.forEach((t=>t(this.i))),this.A):Promise.resolve(!1)}get R(){return this.i.j}g(){if(!this.R)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} '${this.id}': Did you forget to await confirmRender?`)}$(t,i=!0){this.g(),t.C.g(),i&&t.set(this.I(t)),t.parent?.L(t),t.p.T(this.u),this.i.X(t)}get x(){return s.k(this.R?s.get(this.u,"x","px"):this.h.set?.x)}get y(){return s.k(this.R?s.get(this.u,"y","px"):this.h.set?.y)}get q(){return{x:this.x,y:this.y}}get rotation(){return s.B(this.R?s.get(this.u,"rotation"):this.h.set?.rotation,2)}get scale(){return s.B(this.R?s.get(this.u,"scale"):this.h.set?.scale,2)||1}get global(){this.g();const t=this;return{get q(){return t.o?(t.o.C.g(),i.F(t.o.u,h.G.u,t.q)):t.q},get x(){return this.q.x},get y(){return this.q.y},get rotation(){let i=t.rotation,{o:s}=t;for(;s;)s.C.g(),i+=s.rotation,s=s.parent;return i},get scale(){let i=t.scale,{o:s}=t;for(;s;)s.C.g(),i*=s.scale,s=s.parent;return i}}}get height(){return s.k(this.R?s.get(this.u,"height","px"):this.h.set?.height)}get width(){return s.k(this.R?s.get(this.u,"width","px"):this.h.set?.width)}get size(){return(this.height+this.width)/2}get H(){return this.height===this.width&&this.height}I(t,s){return this.g(),t.C.g(),{...i.F(h.G.u,this.u,s??t.global.q),rotation:t.global.rotation-this.global.rotation,scale:t.global.scale/this.global.scale}}set(i){return this.R?t.set(this.u,i):(this.h.set={...this.h.set??{},...i},!1)}to(i){return this.R?t.to(this.u,i):(this.h.to={...this.h.to??{},...i},!1)}from(i){return this.R?t.from(this.u,i):(this.h.from={...this.h.from??{},...i},!1)}v(i,s){return this.R?t.v(this.u,i,s):(this.h.to={...this.h.to??{},...s},this.h.from={...this.h.from??{},...i},!1)}}