import{gsap as t,MotionPathPlugin as i,U as s,XItem as e}from"../helpers/bundler.js";export default class h{t;#t=!1;get i(){return this.#t}async h(t=!0){if(this.#t=this.i||t,this.o)return Promise.resolve(!0);if(!this.i)return Promise.resolve(!1);if(this.t=this.g.u(),await this.t,this.l){if(!await this.l.h())return console.warn(`Attempt to render child [ ${this.id} ] of unrendered parent [ ${this.l.id} ].`),Promise.resolve(!1);this.l?.p(this.g,!1)}return this.m.set&&this.set(this.m.set),this.m.to&&this.m.from?this.R(this.m.from,this.m.to):this.m.to?this.to(this.m.to):this.m.from&&this.from(this.m.from),this.m.A?.forEach((t=>t(this.g))),this.t}get o(){return this.g.$}P(){if(!this.o)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} [ ${this.id} ]: Did you forget to await confirmRender?`)}m;id;g;get D(){return this.P(),this.g.element[0]}get T(){return $(this.D)}constructor(t,i){this.g=t,this.id=this.g.id,this.m=i.m??{}}get l(){return this.g.v}p(t,i=!0){t.v?.j(t),this.g.C(t),this.o&&t.o&&(i&&t.set(this.G(t)),t.T.I(this.D))}get x(){return s.L(this.o?s.get(this.D,"x","px"):this.m.set?.x)}get y(){return s.L(this.o?s.get(this.D,"y","px"):this.m.set?.y)}get X(){return{x:this.x,y:this.y}}get rotation(){return s.k(this.o?s.get(this.D,"rotation"):this.m.set?.rotation,2)}get scale(){return s.k(this.o?s.get(this.D,"scale"):this.m.set?.scale,2)||1}get global(){this.P();const t=this;return{get X(){return i.q(t.D,e.B.D,{x:.5*t.width,y:.5*t.height})},get x(){return this.X.x},get y(){return this.X.y},get rotation(){let i=t.rotation,{l:s}=t;for(;s?.F;)s.H.P(),i+=s.rotation,s=s.v;return i},get scale(){let i=t.scale,{l:s}=t;for(;s?.F;)s.H.P(),i*=s.scale,s=s.v;return i}}}get height(){return s.L(this.o?s.get(this.D,"height","px"):this.m.set?.height)}get width(){return s.L(this.o?s.get(this.D,"width","px"):this.m.set?.width)}get size(){return(this.height+this.width)/2}get J(){return this.height===this.width&&this.height}G(t,s){return this.P(),t.H.P(),{...i.q(e.B.D,this.D,s??t.global.X),rotation:t.global.rotation-this.global.rotation,scale:t.global.scale/this.global.scale}}K(t,i){const{x:h,y:r}=t instanceof e?t.global:t;return s.M({x:h,y:r},i??this.global)}N(t,i){const{x:h,y:r}=t instanceof e?t.global:t;return s.O({x:h,y:r},i??this.global)}S={};set(i){return this.o?t.set(this.D,i):this.m.set={...this.m.set??{},...i},this.g}to(i){if(this.o){const s=t.to(this.D,i);i.id&&(this.S[i.id]=s)}else this.m.to={...this.m.to??{},...i};return this.g}from(i){if(this.o){const s=t.from(this.D,i);i.id&&(this.S[i.id]=s)}else this.m.from={...this.m.from??{},...i};return this.g}R(i,s){if(this.o){const e=t.R(this.D,i,s);s.id&&(this.S[s.id]=e)}else this.m.to={...this.m.to??{},...s},this.m.from={...this.m.from??{},...i};return this.g}}