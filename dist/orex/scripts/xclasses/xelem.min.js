import{gsap as t,MotionPathPlugin as i,U as s,XItem as e}from"../helpers/bundler.js";export default class h{t;#t=!1;get i(){return this.#t}async h(t=!0){if(this.#t=this.i||t,this.o)return Promise.resolve(!0);if(!this.i)return Promise.resolve(!1);if(this.t=this.g.u(),await this.t,this.l){if(!await this.l.h())return console.warn(`Attempt to render child [ ${this.id} ] of unrendered parent [ ${this.l.id} ].`),Promise.resolve(!1);this.l?.p(this.g,!1)}return this.m.set&&this.set(this.m.set),this.m.to&&this.m.from?this.R(this.m.from,this.m.to):this.m.to?this.to(this.m.to):this.m.from&&this.from(this.m.from),this.m.P?.forEach((t=>t(this.g))),this.t}get o(){return this.g.A}$(){if(!this.o)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} [ ${this.id} ]: Did you forget to await confirmRender?`)}m;id;g;get D(){return this.$(),this.g.element[0]}get T(){return $(this.D)}constructor(t,i){this.g=t,this.id=this.g.id,this.m=i.m??{}}get l(){return this.g.v}p(t,i=!0){t.v?.j(t),this.g.C(t),this.o&&t.o?((i||t.G)&&t.set({...i?this.I(t):{},...t.G?{rotation:-1*this.global.rotation}:{}}),t.T.L(this.D)):this.o?(t.X.m.P??=[],t.X.m.P.unshift((()=>{this.p(t,i)}))):(this.m.P??=[],this.m.P.push((()=>this.p(t,i))))}get x(){return s.k(this.o?s.get(this.D,"x","px"):this.m.set?.x)}get y(){return s.k(this.o?s.get(this.D,"y","px"):this.m.set?.y)}get q(){return{x:this.x,y:this.y}}get rotation(){return s.B(this.o?s.get(this.D,"rotation"):this.m.set?.rotation,2)}get scale(){return s.B(this.o?s.get(this.D,"scale"):this.m.set?.scale,2)||1}get origin(){return{x:t.F(this.D,"xPercent")/100*-1*this.width,y:t.F(this.D,"yPercent")/100*-1*this.height}}get global(){this.$();const t=this;return{get q(){return i.H(t.D,e.J.D,t.origin)},get x(){return this.q.x},get y(){return this.q.y},get rotation(){let i=t.rotation,{l:s}=t;for(;s?.K;)s.X.$(),i+=s.rotation,s=s.v;return i},get scale(){let i=t.scale,{l:s}=t;for(;s?.K;)s.X.$(),i*=s.scale,s=s.v;return i}}}get height(){return s.k(this.o?s.get(this.D,"height","px"):this.m.set?.height)}get width(){return s.k(this.o?s.get(this.D,"width","px"):this.m.set?.width)}get size(){return(this.height+this.width)/2}get M(){return this.height===this.width&&this.height}I(t,s){return this.$(),t.X.$(),{...i.H(e.J.D,this.D,s??t.global.q),rotation:t.global.rotation-this.global.rotation,scale:t.global.scale/this.global.scale}}N(t,i){const{x:h,y:r}=t instanceof e?t.global:t;return s.O({x:h,y:r},i??this.global)}S(t,i){const{x:h,y:r}=t instanceof e?t.global:t;return s.U({x:h,y:r},i??this.global)}V={};set(i){return this.o?t.set(this.D,i):this.m.set={...this.m.set??{},...i},this.g}to(i){if(this.o){const s=t.to(this.D,i);i.id&&(this.V[i.id]=s)}else this.m.to={...this.m.to??{},...i};return this.g}from(i){if(this.o){const s=t.from(this.D,i);i.id&&(this.V[i.id]=s)}else this.m.from={...this.m.from??{},...i};return this.g}R(i,s){if(this.o){const e=t.R(this.D,i,s);s.id&&(this.V[s.id]=e)}else this.m.to={...this.m.to??{},...s},this.m.from={...this.m.from??{},...i};return this.g}}