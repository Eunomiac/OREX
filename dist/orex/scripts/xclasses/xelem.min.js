import{gsap as t,MotionPathPlugin as i,U as s,XItem as e}from"../helpers/bundler.js";export default class h{constructor(t){this.t=!1,this.i=t.i,this.id=this.i.id,this.h=t.h??{}}get o(){return this.i.parent}get u(){return this.g(),this.i.element[0]}get p(){return $(this.u)}get l(){return this.t}async m(t=!0){if(this.t=this.l||t,this.R)return Promise.resolve(!0);if(!this.l)return Promise.resolve(!1);if(this.A=this.i.P(),await this.A,this.o){if(!await this.o.m())return console.warn("Attempt to render child of unrendered parent."),Promise.resolve(!1);this.o?.$(this.i,!1)}return this.h.set&&this.set(this.h.set),this.h.to&&this.h.from?this.v(this.h.from,this.h.to):this.h.to?this.to(this.h.to):this.h.from&&this.from(this.h.from),this.h.D?.forEach((t=>t(this.i))),this.A}get R(){return this.i.j}g(){if(!this.R)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} '${this.id}': Did you forget to await confirmRender?`)}$(t,i=!0){t.parent?.C(t),this.i.I(t),this.R&&t.R&&(i&&t.set(this.L(t)),t.p.T(this.u))}get x(){return s.X(this.R?s.get(this.u,"x","px"):this.h.set?.x)}get y(){return s.X(this.R?s.get(this.u,"y","px"):this.h.set?.y)}get k(){return{x:this.x,y:this.y}}get rotation(){return s.q(this.R?s.get(this.u,"rotation"):this.h.set?.rotation,2)}get scale(){return s.q(this.R?s.get(this.u,"scale"):this.h.set?.scale,2)||1}get global(){this.g();const t=this;return{get k(){return t.o?(t.o.B.g(),i.F(t.o.u,e.G.u,t.k)):t.k},get x(){return this.k.x},get y(){return this.k.y},get rotation(){let i=t.rotation,{o:s}=t;for(;s;)s.B.g(),i+=s.rotation,s=s.parent;return i},get scale(){let i=t.scale,{o:s}=t;for(;s;)s.B.g(),i*=s.scale,s=s.parent;return i}}}get height(){return s.X(this.R?s.get(this.u,"height","px"):this.h.set?.height)}get width(){return s.X(this.R?s.get(this.u,"width","px"):this.h.set?.width)}get size(){return(this.height+this.width)/2}get H(){return this.height===this.width&&this.height}L(t,s){return this.g(),t.B.g(),{...i.F(e.G.u,this.u,s??t.global.k),rotation:t.global.rotation-this.global.rotation,scale:t.global.scale/this.global.scale}}set(i){return this.R?t.set(this.u,i):(this.h.set={...this.h.set??{},...i},!1)}to(i){return this.R?t.to(this.u,i):(this.h.to={...this.h.to??{},...i},!1)}from(i){return this.R?t.from(this.u,i):(this.h.from={...this.h.from??{},...i},!1)}v(i,s){return this.R?t.v(this.u,i,s):(this.h.to={...this.h.to??{},...s},this.h.from={...this.h.from??{},...i},!1)}}