import{gsap as t,MotionPathPlugin as i,U as s,XItem as h}from"../helpers/bundler.js";export default class e{constructor(t){this.t=!1,this.i={},this.h=t.h,this.id=this.h.id,this.o=t.o??{}}get u(){return this.t}async g(t=!0){if(this.t=this.u||t,this.l)return Promise.resolve(!0);if(!this.u)return Promise.resolve(!1);if(this.p=this.h.m(),await this.p,this.R){if(!await this.R.g())return console.warn("Attempt to render child of unrendered parent."),Promise.resolve(!1);this.R?.A(this.h,!1)}return this.o.set&&this.set(this.o.set),this.o.to&&this.o.from?this.P(this.o.from,this.o.to):this.o.to?this.to(this.o.to):this.o.from&&this.from(this.o.from),this.o.$?.forEach((t=>t(this.h))),this.p}get l(){return this.h.v}D(){if(!this.l)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} '${this.id}': Did you forget to await confirmRender?`)}get j(){return this.D(),this.h.element[0]}get C(){return $(this.j)}get R(){return this.h.I}A(t,i=!0){t.I?.L(t),this.h.T(t),this.l&&t.l&&(i&&t.set(this.X(t)),t.C.k(this.j))}get x(){return s.q(this.l?s.get(this.j,"x","px"):this.o.set?.x)}get y(){return s.q(this.l?s.get(this.j,"y","px"):this.o.set?.y)}get B(){return{x:this.x,y:this.y}}get rotation(){return s.F(this.l?s.get(this.j,"rotation"):this.o.set?.rotation,2)}get scale(){return s.F(this.l?s.get(this.j,"scale"):this.o.set?.scale,2)||1}get global(){this.D();const t=this;return{get B(){return t.R?(t.R.G.D(),i.H(t.R.j,h.J.j,t.B)):t.B},get x(){return this.B.x},get y(){return this.B.y},get rotation(){let i=t.rotation,{R:s}=t;for(;s;)s.G.D(),i+=s.rotation,s=s.I;return i},get scale(){let i=t.scale,{R:s}=t;for(;s;)s.G.D(),i*=s.scale,s=s.I;return i}}}get height(){return s.q(this.l?s.get(this.j,"height","px"):this.o.set?.height)}get width(){return s.q(this.l?s.get(this.j,"width","px"):this.o.set?.width)}get size(){return(this.height+this.width)/2}get K(){return this.height===this.width&&this.height}X(t,s){return this.D(),t.G.D(),{...i.H(h.J.j,this.j,s??t.global.B),rotation:t.global.rotation-this.global.rotation,scale:t.global.scale/this.global.scale}}set(i){return this.l?t.set(this.j,i):this.o.set={...this.o.set??{},...i},this.h}to(i){if(this.l){const s=t.to(this.j,i);i.id&&(this.i[i.id]=s)}else this.o.to={...this.o.to??{},...i};return this.h}from(i){if(this.l){const s=t.from(this.j,i);i.id&&(this.i[i.id]=s)}else this.o.from={...this.o.from??{},...i};return this.h}P(i,s){if(this.l){const h=t.P(this.j,i,s);s.id&&(this.i[s.id]=h)}else this.o.to={...this.o.to??{},...s},this.o.from={...this.o.from??{},...i};return this.h}}