var t,i=this&&this.t||function(t,i,e,s){if("a"===e&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!s:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?s:"a"===e?s.call(t):s?s.value:i.get(t)},e=this&&this.i||function(t,i,e,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!r:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(t,e):r?r.value=e:i.set(t,e),e};import{gsap as s,MotionPathPlugin as r,U as h,XItem as n}from"../helpers/bundler.js";export default class o{constructor(i,e){t.set(this,!1),this.h={},this.o=i,this.id=this.o.id,this.u=e.u??{}}get p(){return i(this,t,"f")}async l(i=!0){if(e(this,t,this.p||i,"f"),this.g)return Promise.resolve(!0);if(!this.p)return Promise.resolve(!1);if(this.m=this.o.v(),await this.m,this.P){if(!await this.P.l())return console.warn("Attempt to render child of unrendered parent."),Promise.resolve(!1);this.P?.R(this.o,!1)}return this.u.set&&this.set(this.u.set),this.u.to&&this.u.from?this.T(this.u.from,this.u.to):this.u.to?this.to(this.u.to):this.u.from&&this.from(this.u.from),this.u.A?.forEach((t=>t(this.o))),this.m}get g(){return this.o.$}j(){if(!this.g)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} '${this.id}': Did you forget to await confirmRender?`)}get C(){return this.j(),this.o.element[0]}get D(){return $(this.C)}get P(){return this.o.k}R(t,i=!0){t.k?.I(t),this.o.L(t),this.g&&t.g&&(i&&t.set(this.M(t)),t.D.W(this.C))}get x(){return h.X(this.g?h.get(this.C,"x","px"):this.u.set?.x)}get y(){return h.X(this.g?h.get(this.C,"y","px"):this.u.set?.y)}get q(){return{x:this.x,y:this.y}}get rotation(){return h.B(this.g?h.get(this.C,"rotation"):this.u.set?.rotation,2)}get scale(){return h.B(this.g?h.get(this.C,"scale"):this.u.set?.scale,2)||1}get global(){this.j();const t=this;return{get q(){return t.P?(t.P.F.j(),r.G(t.P.C,n.H.C,t.q)):t.q},get x(){return this.q.x},get y(){return this.q.y},get rotation(){let i=t.rotation,{P:e}=t;for(;e;)e.F.j(),i+=e.rotation,e=e.k;return i},get scale(){let i=t.scale,{P:e}=t;for(;e;)e.F.j(),i*=e.scale,e=e.k;return i}}}get height(){return h.X(this.g?h.get(this.C,"height","px"):this.u.set?.height)}get width(){return h.X(this.g?h.get(this.C,"width","px"):this.u.set?.width)}get size(){return(this.height+this.width)/2}get J(){return this.height===this.width&&this.height}M(t,i){return this.j(),t.F.j(),{...r.G(n.H.C,this.C,i??t.global.q),rotation:t.global.rotation-this.global.rotation,scale:t.global.scale/this.global.scale}}set(t){return this.g?s.set(this.C,t):this.u.set={...this.u.set??{},...t},this.o}to(t){if(this.g){const i=s.to(this.C,t);t.id&&(this.h[t.id]=i)}else this.u.to={...this.u.to??{},...t};return this.o}from(t){if(this.g){const i=s.from(this.C,t);t.id&&(this.h[t.id]=i)}else this.u.from={...this.u.from??{},...t};return this.o}T(t,i){if(this.g){const e=s.T(this.C,t,i);i.id&&(this.h[i.id]=e)}else this.u.to={...this.u.to??{},...i},this.u.from={...this.u.from??{},...t};return this.o}}t=new WeakMap;