import{gsap as t,MotionPathPlugin as i,U as s,XItem as e}from"../helpers/bundler.js";export default class h{constructor(t){this.id=t.id??`x-elem-${s.t()}`,this.i=t.i,this.h=t.o??{},t.u||this.g()}get p(){return this.i.parent}l(){if(!this.m)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} '${this.id}': Did you forget to await asyncRender?`)}get $(){return this.l(),this.i.element[0]}get _(){return $(this.$)}async g(){return this.R||(this.R=this.i.A(),await this.R,this.p&&(await this.p.g(),this.p.v(this.i,!1)),this.h.set&&this.set(this.h.set),this.h.to&&this.h.from?this.D(this.h.from,this.h.to):this.h.to?this.to(this.h.to):this.h.from&&this.from(this.h.from)),this.R}get m(){return this.i.j}v(t,i=!0){this.l(),t.C.l(),i&&this.set(this.I(t)),t._.L(this.$)}get P(){return s.get(this.$,"x","px")}get T(){return s.get(this.$,"y","px")}get X(){return{x:this.P,y:this.T}}get k(){return s.q(s.get(this.$,"rotation"))}get B(){return s.q(s.get(this.$,"scale"))||1}get F(){return this.p&&this.p.m?i.G(this.p.$,e.H.$,this.X):this.X}get x(){return this.F.x}get y(){return this.F.y}get rotation(){let t=this.k,{p:i}=this;for(;i&&i.m;)t+=s.q(s.get(i.$,"rotation")),i=i.parent;return t}get scale(){let t=1,{p:i}=this;for(;i&&i.m;)t*=s.q(s.get(i.$,"scale")),i=i.parent;return t}get height(){return s.get(this.$,"height","px")}get width(){return s.get(this.$,"width","px")}get size(){return(this.height+this.width)/2}get J(){return this.height===this.width&&this.height}I(t,s){return{...i.G(e.H.$,this.$,s??t.F??{x:0,y:0}),rotation:t?.rotation??0-this.rotation,scale:t?.scale??1/this.scale}}to(i){return this.l,t.to(this.$,i)}from(i){return this.l,t.from(this.$,i)}D(i,s){return this.l,t.D(this.$,i,s)}set(i){return this.l,t.set(this.$,i)}}