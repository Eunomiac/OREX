import{gsap as t,MotionPathPlugin as i,U as s,XItem as e}from"../helpers/bundler.js";export default class h{t;#t=!1;get i(){return this.#t}async h(t=!0){if(this.#t=this.i||t,this.o)return Promise.resolve(!0);if(!this.i)return Promise.resolve(!1);if(this.t=this.g.u(),await this.t,this.p){if(!await this.p.h())return console.warn("Attempt to render child of unrendered parent."),Promise.resolve(!1);this.p?.l(this.g,!1)}return this.m.set&&this.set(this.m.set),this.m.to&&this.m.from?this.R(this.m.from,this.m.to):this.m.to?this.to(this.m.to):this.m.from&&this.from(this.m.from),this.m.A?.forEach((t=>t(this.g))),this.t}get o(){return this.g.P}$(){if(!this.o)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} '${this.id}': Did you forget to await confirmRender?`)}m;id;g;get v(){return this.$(),this.g.element[0]}get D(){return $(this.v)}constructor(t,i){this.g=t,this.id=this.g.id,this.m=i.m??{}}get p(){return this.g.j}l(t,i=!0){t.j?.C(t),this.g.I(t),this.o&&t.o&&(i&&t.set(this.L(t)),t.D.T(this.v))}get x(){return s.X(this.o?s.get(this.v,"x","px"):this.m.set?.x)}get y(){return s.X(this.o?s.get(this.v,"y","px"):this.m.set?.y)}get k(){return{x:this.x,y:this.y}}get rotation(){return s.q(this.o?s.get(this.v,"rotation"):this.m.set?.rotation,2)}get scale(){return s.q(this.o?s.get(this.v,"scale"):this.m.set?.scale,2)||1}get global(){this.$();const t=this;return{get k(){return t.p?(t.p.B.$(),i.F(t.p.v,e.G.v,t.k)):t.k},get x(){return this.k.x},get y(){return this.k.y},get rotation(){let i=t.rotation,{p:s}=t;for(;s;)s.B.$(),i+=s.rotation,s=s.j;return i},get scale(){let i=t.scale,{p:s}=t;for(;s;)s.B.$(),i*=s.scale,s=s.j;return i}}}get height(){return s.X(this.o?s.get(this.v,"height","px"):this.m.set?.height)}get width(){return s.X(this.o?s.get(this.v,"width","px"):this.m.set?.width)}get size(){return(this.height+this.width)/2}get H(){return this.height===this.width&&this.height}L(t,s){return this.$(),t.B.$(),{...i.F(e.G.v,this.v,s??t.global.k),rotation:t.global.rotation-this.global.rotation,scale:t.global.scale/this.global.scale}}J={};set(i){return this.o?t.set(this.v,i):this.m.set={...this.m.set??{},...i},this.g}to(i){if(this.o){const s=t.to(this.v,i);i.id&&(this.J[i.id]=s)}else this.m.to={...this.m.to??{},...i};return this.g}from(i){if(this.o){const s=t.from(this.v,i);i.id&&(this.J[i.id]=s)}else this.m.from={...this.m.from??{},...i};return this.g}R(i,s){if(this.o){const e=t.R(this.v,i,s);s.id&&(this.J[s.id]=e)}else this.m.to={...this.m.to??{},...s},this.m.from={...this.m.from??{},...i};return this.g}}