var t;import{gsap as i,MotionPathPlugin as s,U as e,XItem as h}from"../helpers/bundler.js";export default class r{constructor(i){t.set(this,!1),this.t={},this.i=i.i,this.id=this.i.id,this.h=i.h??{}}get o(){return this.u}async g(t=!0){if(this.u=this.o||t,this.l)return Promise.resolve(!0);if(!this.o)return Promise.resolve(!1);if(this.p=this.i.m(),await this.p,this.R){if(!await this.R.g())return console.warn("Attempt to render child of unrendered parent."),Promise.resolve(!1);this.R?.A(this.i,!1)}return this.h.set&&this.set(this.h.set),this.h.to&&this.h.from?this.P(this.h.from,this.h.to):this.h.to?this.to(this.h.to):this.h.from&&this.from(this.h.from),this.h.$?.forEach((t=>t(this.i))),this.p}get l(){return this.i.v}D(){if(!this.l)throw Error(`Can't retrieve element of unrendered ${this.constructor.name??"XItem"} '${this.id}': Did you forget to await confirmRender?`)}get j(){return this.D(),this.i.element[0]}get k(){return $(this.j)}get R(){return this.i.C}A(t,i=!0){t.C?.I(t),this.i.L(t),this.l&&t.l&&(i&&t.set(this.M(t)),t.k.T(this.j))}get x(){return e.W(this.l?e.get(this.j,"x","px"):this.h.set?.x)}get y(){return e.W(this.l?e.get(this.j,"y","px"):this.h.set?.y)}get X(){return{x:this.x,y:this.y}}get rotation(){return e.q(this.l?e.get(this.j,"rotation"):this.h.set?.rotation,2)}get scale(){return e.q(this.l?e.get(this.j,"scale"):this.h.set?.scale,2)||1}get global(){this.D();const t=this;return{get X(){return t.R?(t.R.B.D(),s.F(t.R.j,h.G.j,t.X)):t.X},get x(){return this.X.x},get y(){return this.X.y},get rotation(){let i=t.rotation,{R:s}=t;for(;s;)s.B.D(),i+=s.rotation,s=s.C;return i},get scale(){let i=t.scale,{R:s}=t;for(;s;)s.B.D(),i*=s.scale,s=s.C;return i}}}get height(){return e.W(this.l?e.get(this.j,"height","px"):this.h.set?.height)}get width(){return e.W(this.l?e.get(this.j,"width","px"):this.h.set?.width)}get size(){return(this.height+this.width)/2}get H(){return this.height===this.width&&this.height}M(t,i){return this.D(),t.B.D(),{...s.F(h.G.j,this.j,i??t.global.X),rotation:t.global.rotation-this.global.rotation,scale:t.global.scale/this.global.scale}}set(t){return this.l?i.set(this.j,t):this.h.set={...this.h.set??{},...t},this.i}to(t){if(this.l){const s=i.to(this.j,t);t.id&&(this.t[t.id]=s)}else this.h.to={...this.h.to??{},...t};return this.i}from(t){if(this.l){const s=i.from(this.j,t);t.id&&(this.t[t.id]=s)}else this.h.from={...this.h.from??{},...t};return this.i}P(t,s){if(this.l){const e=i.P(this.j,t,s);s.id&&(this.t[s.id]=e)}else this.h.to={...this.h.to??{},...s},this.h.from={...this.h.from??{},...t};return this.i}}t=new WeakMap;