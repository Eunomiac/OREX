import{C as t,U as s,DB as e,XItem as r}from"../helpers/bundler.js";export default class i extends r{static get t(){return s.i(super.t,{o:["x-group"]})}get h(){return super.h}set h(t){super.h=t}constructor(t,s){super(t,s)}}class n extends r{constructor(t,s){super(s,{id:`${s.id}-arm-${s.u.size}`,p:!0}),this.l=t,this.g(t,!1),t instanceof i&&this.l.set({})}static get t(){return s.i(super.t,{o:["x-arm"],m:{set:{height:0,width:0,transformOrigin:"0% 50%",top:"50%",left:"50%",P:0,O:0}}})}async initialize(){return await super.initialize()?(this.l.set({right:-1*this.l.width}),this.g(this.l,!1),this.l.X()):Promise.resolve(!1)}}export class XOrbit extends i{constructor(t,s,e){super(e,{id:t,m:{set:{height:e.height,width:e.width,left:.5*e.width,top:.5*e.height}}});const r=this;this.to({rotation:"+=360",repeat:-1,duration:10*s,I:"none",A(){r.$.forEach((t=>{t.h?.R&&t.set({rotation:-1*t.h.global.rotation})}))}});this.j=s}static get t(){return s.i(super.t,{o:["x-orbit"]})}get M(){return Array.from(this.u)}get $(){return this.M.map((t=>t.l))}get U(){return.5*this.weight*this.h.width}get weight(){return this.j}set weight(t){this.j=t,this.k&&this.D()}D(){e.log(`[${this.id}] Updating Arms`,this.M);const t=360/this.M.length;this.M.forEach(((s,e)=>{s.to({width:this.U,rotation:t*e,delay:.2*e,I:"power2.inOut",duration:1})}))}async q(t,s=0){e.log(`[${this.id}] Adding XItem: ${t.id}`);const r=new n(t,this);return await r.initialize()?(this.D(),Promise.resolve(!0)):Promise.resolve(!1)}async v(t){const s=t.map(((t,s)=>{const e=new n(t,this);return this.g(e),e.initialize()}));return await Promise.allSettled(s)?(this.D(),Promise.resolve(!0)):Promise.resolve(!1)}}export class XPool extends i{constructor(s,{B:e,...r}){super(s,r),this.C=[],this.F=new Map,e=e??{...t.G},this.H=new Map(Object.entries(e)),this.H.forEach(((t,s)=>{this.F.set(s,new XOrbit(s,t,this))}))}static get t(){return s.i(super.t,{o:["x-pool"]})}get B(){return this.F}get J(){return Array.from(Object.values(this.B))}get $(){return this.J.map((t=>t.K())).flat()}async q(t,s){const e=this.B.get(s);return e instanceof XOrbit&&await e.initialize()?e.q(t):Promise.resolve(!1)}}export class XRoll extends XPool{}