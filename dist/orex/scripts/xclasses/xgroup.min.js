var t,e,s,r,i,n,a,o,h,u=this&&this.t||function(t,e,s,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,s):i?i.value=s:e.set(t,s),s},c=this&&this.i||function(t,e,s,r){if("a"===s&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(t):r?r.value:e.get(t)};import{C as d,U as p,XItem as l,XDie as f,XAnimVars as w}from"../helpers/bundler.js";export default class m extends l{static get o(){return p.h(super.o,{u:["x-group"]})}get p(){return super.p}set p(t){super.p=t}get l(){return Array.from(this.m)}constructor(t,e){super(t,e)}}class x extends l{constructor(t,e){super(e,{id:"arm"}),this.g=t,this.P(t,!1)}static get o(){return p.h(super.o,{u:["x-arm"],M:{set:{height:0,width:0,transformOrigin:"0% 50%",top:"50%",left:"50%",O:0,X:0}}})}async initialize(){return await super.initialize()?(this.g.set({left:"unset",top:"unset",right:-1*this.g.width}),this.P(this.g,!1),this.g.R()):Promise.resolve(!1)}}export var XOrbitType;!function(t){t.v="Main",t.k="Inner",t.I="Outer"}(XOrbitType||(XOrbitType={}));export class XOrbit extends m{constructor(i,n,a,o){a??=d.W[i].T,o??=d.W[i].j,super(n,{id:i,M:{set:{height:n.height,width:n.width,left:.5*n.width,top:.5*n.height},A:[t=>t.D()]}}),t.set(this,void 0),e.set(this,void 0),s.set(this,void 0),r.set(this,void 0),u(this,r,a,"f"),u(this,t,Math.abs(o),"f"),u(this,e,o>0?"+=360":"-=360","f"),u(this,s,10*c(this,r,"f")*c(this,t,"f"),"f")}static get o(){return p.h(super.o,{u:["x-orbit"]})}get C(){return Array.from(this.m)}get l(){return this.C.map((t=>t.g))}get T(){return c(this,r,"f")}set T(t){u(this,r,t,"f"),this.$&&this.G()}get S(){return.5*this.T*this.p.width}D(){const[{type:t,...r}]=w.q({B:this,rotation:c(this,e,"f"),duration:c(this,s,"f")});this.to(r)}G(t=.5){const e=360/this.C.length,s=t/this.C.length;this.C.forEach(((r,i)=>{r.set({width:0,rotation:e*i-90}).to({width:this.S,delay:s*i,F:"back.out(8)",duration:t}).to({rotation:e*i,F:"power2.out",duration:t})}))}async H(t){const e=new x(t,this);return await e.initialize()?(this.G(),Promise.resolve(!0)):Promise.resolve(!1)}async J(t){const e=t.map((t=>{const e=new x(t,this);return this.P(e),console.log(this.C),e.initialize()}));return await Promise.allSettled(e)?(this.G(),Promise.resolve(!0)):Promise.resolve(!1)}}t=new WeakMap,e=new WeakMap,s=new WeakMap,r=new WeakMap;export class XPool extends m{constructor(t,{K:e=p.L(d.W),...s}){super(t,s),i.set(this,[]),n.set(this,new Map),a.set(this,new Map),o.set(this,new Map);for(const[t,{T:s,j:r}]of Object.entries(e))c(this,a,"f").set(t,s),c(this,o,"f").set(t,r),c(this,n,"f").set(t,new XOrbit(t,this,s,r))}static get o(){return p.h(super.o,{u:["x-pool"],M:{set:{height:200,width:200}}})}get K(){return c(this,n,"f")}get N(){return Array.from(this.K.values())}get l(){return this.N.map((t=>t.l)).flat()}async H(t,e){const s=this.K.get(e);return s instanceof XOrbit&&await s.initialize()?s.H(t):Promise.resolve(!1)}async J(t){const e=this;return Promise.allSettled(Object.entries(t).map((([t,s])=>s.map((s=>e.H(s,t))))))}}i=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,XPool.U=new Map;export class XRoll extends XPool{constructor(t,e){super(t,e),h.set(this,!1)}get V(){return c(this,h,"f")}get Y(){return this.V?this.Z(f,!0).map((t=>t.value||0)):[]}_(t=!1){if(t||!c(this,h,"f")){u(this,h,!0,"f");const t=this.Z(f,!0).forEach((async e=>{const s={};["fadeDieText","pulseRolledDie"].forEach((t=>{s[t]=w[t]({g:e}),delete s[t].type,delete s[t].timestamp})),e.to(s.et).tt(),e.to(),this.st([""]),gsap.timeline().et(`#${this.id} .x-die`).call((()=>t.map((t=>t.tt())))).pulseRolledDie(`#${this.id} .x-die`)}))}}}h=new WeakMap,XRoll.U=new Map;