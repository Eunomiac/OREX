var t,e,r,i,s,n=this&&this.t||function(t,e,r,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(t,r):s?s.value=r:e.set(t,r),r},h=this&&this.i||function(t,e,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(t):i?i.value:e.get(t)};import{gsap as a,U as o,DB as u,XElem as c}from"../helpers/bundler.js";export default class d extends Application{constructor(t,{h:e=[],...h}){t&&(h.id=o.o(`${t.id}-${h.id}`.replace(/^X?ROOT-?/,"X-"))),super(h),r.set(this,!1),i.set(this,void 0),s.set(this,new Set),this.u=new Set,this.options.h.push(...e),this.l=Object.assign(h,this.options),n(this,i,null===t?null:t??d.g,"f"),this.p=new c({m:this,P:this.l.P}),this.constructor.O(this)}static get A(){return o.T(super.A,{v:!1,h:["x-item"],R:o.X("xitem"),k:d.g,P:{set:{x:0,y:0,rotation:0,scale:1,j:-50,$:-50,transformOrigin:"50% 50%"}}})}static get g(){return h(d,t,"f",e)}static async K(){return d.g&&d.g.M(),n(d,t,new d(null,{id:"XROOT",P:{set:{j:0,$:0}}}),"f",e),h(d,t,"f",e).initialize()}static O(t){t.constructor.C.set(t.id,t)}static W(t){t.constructor.C.delete("string"==typeof t?t:t.id)}static I(){return Array.from(this.C.values())}get S(){return this.p.S}get D(){return this.p.D}get k(){return h(this,i,"f")}set k(t){n(this,i,t??d.g,"f")}get G(){return h(this,s,"f")}get H(){return this.G.size>0}U(t){t.k=this,this.G.add(t)}q(t){this.G.delete(t)}B(t,e=!1){const r=Array.from(this.G.values()).flat().filter(o.F(t));return e&&r.push(...Array.from(this.G.values()).map((e=>e.B(t,!0))).flat()),r}async initialize(){return this.J?Promise.resolve(!0):await this.p.L(!0)?Promise.allSettled(this.B(d).map((t=>t.initialize()))).then((()=>(n(this,r,!0,"f"),Promise.resolve(!0))),(()=>Promise.resolve(!1))):Promise.resolve(!1)}get N(){return this.V}get J(){return h(this,r,"f")}get x(){return this.p.x}get y(){return this.p.y}get Y(){return this.p.Y}get rotation(){return this.p.rotation}get scale(){return this.p.scale}get global(){return this.p.global}get height(){return this.p.height}get width(){return this.p.width}get size(){return this.p.size}get Z(){return this.p.Z}get L(){return this.p.L.bind(this.p)}get _(){return this.p._.bind(this.p)}tt(t){this.u.add(t),a.et.add(t)}rt(t){this.u.delete(t),a.et.remove(t)}get set(){return this.p.set.bind(this.p)}get to(){return this.p.to.bind(this.p)}get from(){return this.p.from.bind(this.p)}get it(){return this.p.it.bind(this.p)}M(){this.H&&this.B(d).forEach((t=>t.M())),this.u.forEach((t=>a.et.remove(t))),this.u.clear(),this.k instanceof d&&this.k.q(this),this.N&&(a.st(this.S),this.D.remove())}getData(){const t=super.getData();return Object.assign(t,{id:this.id,h:this.options.h.join(" ")}),t}async nt(){if(!this.p.ht)return u.error("Attempt to render an unready Application"),Promise.resolve(!1);try{return await this.ot(!0,{}),Promise.resolve(!0)}catch(t){return this.ut=Application.RENDER_STATES.ERROR,Hooks.onError("Application#render",t,{ct:`An error occurred while rendering ${this.constructor.name} ${this.dt}`,log:"error"}),Promise.resolve(!1)}}}t=d,r=new WeakMap,i=new WeakMap,s=new WeakMap,e={value:void 0},d.C=new Map;