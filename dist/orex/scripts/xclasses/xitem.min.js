import{gsap as t,U as e,DB as r,XElem as i}from"../helpers/bundler.js";export default class s extends Application{constructor(t,{t:r=[],...n}){n.i||(n.id+=e.h()),super(n),this.o=!1,this.u=new Set,this.g=new Set,this.options.t.push(...r),this.l=Object.assign(n,this.options),this.p=null===t?null:t??s.m,this.P=new i({A:this,O:this.l.O})}static get R(){return e.k(super.R,{T:!1,t:["x-item"],X:e.K("xitem"),j:s.m,O:{set:{x:0,y:0,rotation:0,scale:1,I:-50,$:-50,transformOrigin:"50% 50%"}}})}static get m(){return s.v}static async D(){return s.m&&s.m.S(),s.v=new s(null,{id:"x-root",i:!0,O:{set:{I:0,$:0}}}),s.v.initialize()}get C(){return this.P.C}get H(){return this.P.H}get j(){return this.p}set j(t){this.p=t??s.m}get q(){return this.u}get B(){return this.q.size>0}F(t){t.j=this,this.q.add(t)}G(t){this.q.delete(t)}J(t,r=!1){const i=e.L(t)?s:t;return r?Array.from(this.q.values()).map((t=>t.J(void 0,!0))).flat().filter((t=>t instanceof i)):Array.from(this.q.values()).filter((t=>t instanceof i))}async initialize(){return this.M?Promise.resolve(!0):await this.P.N(!0)?Promise.allSettled(this.J().map((t=>t.initialize()))).then((()=>(this.o=!0,Promise.resolve(!0))),(()=>Promise.resolve(!1))):Promise.resolve(!1)}get U(){return this.V}get M(){return this.o}get x(){return this.P.x}get y(){return this.P.y}get W(){return this.P.W}get rotation(){return this.P.rotation}get scale(){return this.P.scale}get global(){return this.P.global}get height(){return this.P.height}get width(){return this.P.width}get size(){return this.P.size}get Y(){return this.P.Y}get N(){return this.P.N.bind(this.P)}get Z(){return this.P.Z.bind(this.P)}_(e){this.g.add(e),t.tt.add(e)}et(e){this.g.delete(e),t.tt.remove(e)}get set(){return this.P.set.bind(this.P)}get to(){return this.P.to.bind(this.P)}get from(){return this.P.from.bind(this.P)}get rt(){return this.P.rt.bind(this.P)}S(){this.B&&this.J().forEach((t=>t.S())),this.g.forEach((e=>t.tt.remove(e))),this.g.clear(),this.j instanceof s&&this.j.G(this),this.U&&(t.it(this.C),this.H.remove())}getData(){const t=super.getData();return Object.assign(t,{id:this.id,t:this.options.t.join(" ")}),t}async st(){if(!this.P.nt)return r.error("Attempt to render an unready Application"),Promise.resolve(!1);try{return await this.ht(!0,{}),Promise.resolve(!0)}catch(t){return this.ot=Application.RENDER_STATES.ERROR,Hooks.onError("Application#render",t,{ut:`An error occurred while rendering ${this.constructor.name} ${this.ct}`,log:"error"}),Promise.resolve(!1)}}}