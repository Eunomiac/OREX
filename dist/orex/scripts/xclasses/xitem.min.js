var t,e,r,i,s,n=this&&this.t||function(t,e,r,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(t,r):s?s.value=r:e.set(t,r),r},h=this&&this.i||function(t,e,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(t):i?i.value:e.get(t)};import{gsap as a,U as o,DB as u,XElem as c}from"../helpers/bundler.js";export default class d extends Application{constructor(t,{h:e=[],...h}){t&&(h.id=o.o(`${t.id}-${h.id}`.replace(/^X?ROOT-?/,"X-"))),super(h),r.set(this,!1),i.set(this,void 0),s.set(this,new Set),this.u=new Set,this.options.h.push(...e),this.l=Object.assign(h,this.options),n(this,i,null===t?null:t??d.g,"f"),this.p=new c(this,{m:this.l.m}),this.constructor.P(this)}static get O(){return o.T(super.O,{A:!1,h:["x-item"],v:o.R("xitem"),X:d.g,m:{set:{x:0,y:0,rotation:0,scale:1,k:-50,j:-50,transformOrigin:"50% 50%"}}})}static get g(){return h(d,t,"f",e)}static async $(){return d.g&&d.g.K(),n(d,t,new d(null,{id:"XROOT",m:{set:{k:0,j:0}}}),"f",e),h(d,t,"f",e).initialize()}static P(t){t.constructor.M.set(t.id,t)}static C(t){t.constructor.M.delete("string"==typeof t?t:t.id)}static W(){return Array.from(this.M.values())}get I(){return this.p.I}get S(){return this.p.S}get X(){return h(this,i,"f")}set X(t){n(this,i,t??d.g,"f")}get D(){return h(this,s,"f")}get G(){return this.D.size>0}H(t){t.X=this,this.D.add(t)}U(t){this.D.delete(t)}q(t,e=!1){const r=Array.from(this.D.values()).flat().filter(o.B(t));return e&&r.push(...Array.from(this.D.values()).map((e=>e.q(t,!0))).flat()),r}async initialize(){return this.F?Promise.resolve(!0):await this.p.J(!0)?Promise.allSettled(this.q(d).map((t=>t.initialize()))).then((()=>(n(this,r,!0,"f"),Promise.resolve(!0))),(()=>Promise.resolve(!1))):Promise.resolve(!1)}get L(){return this.N}get F(){return h(this,r,"f")}get x(){return this.p.x}get y(){return this.p.y}get V(){return this.p.V}get rotation(){return this.p.rotation}get scale(){return this.p.scale}get global(){return this.p.global}get height(){return this.p.height}get width(){return this.p.width}get size(){return this.p.size}get Y(){return this.p.Y}get J(){return this.p.J.bind(this.p)}get Z(){return this.p.Z.bind(this.p)}_(t){this.u.add(t),a.tt.add(t)}et(t){this.u.delete(t),a.tt.remove(t)}get set(){return this.p.set.bind(this.p)}get to(){return this.p.to.bind(this.p)}get from(){return this.p.from.bind(this.p)}get rt(){return this.p.rt.bind(this.p)}K(){this.G&&this.q(d).forEach((t=>t.K())),this.u.forEach((t=>a.tt.remove(t))),this.u.clear(),this.X instanceof d&&this.X.U(this),this.L&&(a.it(this.I),this.S.remove())}getData(){const t=super.getData();return Object.assign(t,{id:this.id,h:this.options.h.join(" ")}),t}async st(){if(!this.p.nt)return u.error("Attempt to render an unready Application"),Promise.resolve(!1);try{return await this.ht(!0,{}),Promise.resolve(!0)}catch(t){return this.ot=Application.RENDER_STATES.ERROR,Hooks.onError("Application#render",t,{ut:`An error occurred while rendering ${this.constructor.name} ${this.ct}`,log:"error"}),Promise.resolve(!1)}}}t=d,r=new WeakMap,i=new WeakMap,s=new WeakMap,e={value:void 0},d.M=new Map;